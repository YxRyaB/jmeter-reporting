title: "should last loadtest by name"
given:
  - time: 2014-04-14T09:28:00Z
  - collection: load_tests
    data: |
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656df2" }, "ltKey" : { "name" : "api-geo", "version" : "1.0-SNAPSHOT", "run" : 1 }, "date" : { "$date" : 1397422436697 }, "st" : 1, "ref" : false }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656df3" }, "ltKey" : { "name" : "api-geo", "version" : "1.0-SNAPSHOT", "run" : 2 }, "date" : { "$date" : 1397508836697 }, "st" : 1, "ref" : false }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656df4" }, "ltKey" : { "name" : "api-geo", "version" : "1.0-SNAPSHOT", "run" : 3 }, "date" : { "$date" : 1397512436697 }, "st" : 1, "ref" : false }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656df5" }, "ltKey" : { "name" : "api-geo", "version" : "1.0", "run" : 1 }, "date" : { "$date" : 1397512556697 }, "st" : 1, "ref" : false }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656df6" }, "ltKey" : { "name" : "api-geo", "version" : "1.0", "run" : 2 }, "date" : { "$date" : 1397526836697 }, "st" : 1, "ref" : true }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656df7" }, "ltKey" : { "name" : "api-geo", "version" : "1.1-SNAPSHOT", "run" : 1 }, "date" : { "$date" : 1397534036697 }, "st" : 1, "ref" : false }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656df8" }, "ltKey" : { "name" : "api-geo", "version" : "1.1-SNAPSHOT", "run" : 2 }, "date" : { "$date" : 1397534036797 }, "st" : 1, "ref" : false }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656df9" }, "ltKey" : { "name" : "api-geo", "version" : "1.1", "run" : 1 }, "date" : { "$date" : 1397595236697 }, "st" : 1, "ref" : true }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656dfa" }, "ltKey" : { "name" : "api-map", "version" : "1.0", "run" : 1 }, "date" : { "$date" : 1397508836697 }, "st" : 1, "ref" : false }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656dfb" }, "ltKey" : { "name" : "api-map", "version" : "1.1", "run" : 1 }, "date" : { "$date" : 1397595236697 }, "st" : 1, "ref" : false }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656dfc" }, "ltKey" : { "name" : "api-word", "version" : "1.0", "run" : 1 }, "date" : { "$date" : 1397595236697 }, "st" : 1, "ref" : true }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656dfd" }, "ltKey" : { "name" : "api-day", "version" : "1.0", "run" : 1 }, "date" : { "$date" : 1397336036697 }, "st" : 1, "ref" : true }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656dfe" }, "ltKey" : { "name" : "api-day", "version" : "1.1", "run" : 1 }, "date" : { "$date" : 1397422436697 }, "st" : 1, "ref" : false }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656dff" }, "ltKey" : { "name" : "api-day", "version" : "1.1", "run" : 2 }, "date" : { "$date" : 1397508836697 }, "st" : 1, "ref" : true }
          { "_id" : { "$oid" : "534d9fd9f4ef65a211656e00" }, "ltKey" : { "name" : "api-day", "version" : "1.1", "run" : 3 }, "date" : { "$date" : 1397595236697 }, "st" : 1, "ref" : false }
wts:
  - when: GET load_tests/find_last/api-geo
    then: |
          { "_id" : "534d9fd9f4ef65a211656df9", "ltKey" : { "name" : "api-geo", "version" : "1.1", "run" : 1 }, "date" : "2014-04-15T20:53:56.697+0000", "st" : 1, "ref" : true }
  - when: GET load_tests/find_last/api-map
    then: |
          { "_id" : "534d9fd9f4ef65a211656dfb", "ltKey" : { "name" : "api-map", "version" : "1.1", "run" : 1 }, "date" : "2014-04-15T20:53:56.697+0000", "st" : 1, "ref" : false }
  - when: GET load_tests/find_last/api-word
    then: |
          { "_id" : "534d9fd9f4ef65a211656dfc", "ltKey" : { "name" : "api-word", "version" : "1.0", "run" : 1 }, "date" : "2014-04-15T20:53:56.697+0000", "st" : 1, "ref" : true }
  - when: GET load_tests/find_last/api-day
    then: |
          { "_id" : "534d9fd9f4ef65a211656e00", "ltKey" : { "name" : "api-day", "version" : "1.1", "run" : 3 }, "date" : "2014-04-15T20:53:56.697+0000", "st" : 1, "ref" : false }
  - when: GET load_tests/find_last/api-unknow
    then: |
          404
 